
{{ 'slider.css' | asset_url | stylesheet_tag }}
{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}
<div class="section-{{ section.id }}-padding">
<div class="collection page-width ">
  <div class="title-wrapper-with-link">
	<h2 class="title{% if section.settings.title == blank %} title--no-heading{% endif %}">{{ section.settings.title  }}</h2>
  </div>
</div>
<div class="dawn-product-slider">
   <div class="carousel1 category-slider">
      {% for block in section.blocks %}
      
      <div class="carousel-cell">
         <a href="{{ block.settings.url }}">
            <img data-flickity-lazyload="{{ block.settings.img | img_url: 'master' }}"  border="0" />
            <p class="title">{{ block.settings.title }}</p>
<!--         <p>{{ collection.all_products_count }} Restaurants Prododucts</p> -->
         </a>
      </div>
      {% endfor %}
   </div>

</div>
</div>
{% assign nav_range = section.settings.navigation_amount %}
{% style %}
	@media only screen and ( min-width: 1201px ) {
		{% if nav_range == 2 %}
        .dawn-product-slider .carousel-cell {
            width: calc(49% - 10px);
        }
		{% elsif nav_range == 3 %}
        .dawn-product-slider .carousel-cell {
          width: calc(32% - 10px);
        }
		{% elsif nav_range == 4 %}
        .dawn-product-slider .carousel-cell {
          width: calc(24% - 10px);
         }
		{% endif %}
    }
    .flickity-page-dots .dot {
    	background: {{ section.settings.navigation_color }};
    }
    .flickity-button-icon {
    	color: {{ section.settings.navigation_color }};
    }

  .dawn-product-slider .category-slider a .title {
    font-weight: 700;
    font-size: 28px;
    line-height: 42px;
    letter-spacing: .05em;
    color: #000;
}
{% endstyle %}
<script>
   var elem1 = document.querySelector('.dawn-product-slider .category-slider');
   var flkty1 = new Flickity( elem1, {
     contain: true,
     imagesLoaded: true,
     lazyLoad: 2,
     wrapAround: true,
     pageDots: true,
   });
   {% if request.design_mode %}
   document.addEventListener("shopify:section:load", function(event) {
     var elem1 = document.querySelector('.dawn-product-slider .category-slider');
     var flkty1 = new Flickity( elem1, {
       contain: true,
       imagesLoaded: true,
       lazyLoad: 2,
       wrapAround: true,
       pageDots: true,
     });
   });
   {% endif %}
</script>
{% schema %}
{
  "name": "Category slider",
  "settings": [
    {
      "type": "range",
      "id": "navigation_amount",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Change the number of cards in view"
    },
    {
      "type": "color",
      "id": "navigation_color",
      "label": "Change color of the pagination|navigation|scrollbar"
    },
	{
      "type": "inline_richtext",
      "id": "title",
      "default": "Collections slider",
      "label": "t:sections.featured-collection.settings.title.label"
    },
      {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ] ,
  	"blocks": [
	{
        "type": "card",
        "name": "Collection card",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Enter Name"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Page URL"
          }
          ,
          {
            "type": "image_picker",
            "id": "img",
            "label": "Image"
          }
    	]
	}
  ] ,
  "presets": [
    {
      "name": "Category slider",
      "category":"Custom"
    }
  ]
}
{% endschema %}  